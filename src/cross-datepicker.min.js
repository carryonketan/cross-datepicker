!function(){var t=function(t){return"number"==typeof t?t?0>t?-1:1:t===t?0:0/0:0/0};$.fn.insertAt=$.fn.insertAt||function(t,n){return this.each(function(){0===t?n.prepend(this):n.children().eq(t-1).after(this)})};var n=function(n,a){if(n.data("cross-datepicker"))return this;n.attr("type","text"),a=$.extend({},$.fn.cdp.defaults,a),a.hideInput&&n.hide();var e=$("<div>").addClass(a.classes.container||"").data("input",n).insertBefore(n),r=[31,29,31,30,31,30,31,31,30,31,30,31],s=$("<select>").addClass(a.classes.controls||"").addClass(a.classes.days||""),o=$("<select>").addClass(a.classes.controls||"").addClass(a.classes.months||""),i=$("<select>").addClass(a.classes.controls||"").addClass(a.classes.year||""),d=function(t){for(var n={},a="",e=0,r={d:s,m:o,y:i},d=0,l=t;d<l.length;d++){var c=l[d];if(a==c?n[c].count++:("d"==c||"y"==c||"m"==c)&&(n[c]={count:1,order:e++,e:r[c]},r[c].data("order",n[c].order),a=c),e>3)throw"Invalid date format"}return n},l=d(a.inputFormat),c=d(a.format);for(var p in c)c[p].e.appendTo(e);e.sort(function(t,n){return t.data("order")>n.data("order")?1:t.data("order")<n.data("order")?-1:0});var u=function(t,n){for(var a=String(t),e=n||c.d.count;e>a.length;)a="0"+a;return a},f=function(t,n){if(t>12)throw"Invalid month: "+t;var e=n||c.m.count,r=String(t);if(2==e)1==r.length&&(r="0"+r);else if(3==e)r=a.months[p-1].substr(0,3);else{if(4!=e)throw"Invalid month format";r=a.months[p-1]}return r},y=function(t,n){var a=String(t),e=n||c.y.count;if(2==e)a=a.substr(a.length-2,2);else if(4!=e)throw"Invalid year format";return a},h=function(t,n,a,e,r){var s=["d","m","y"],o=t;"string"==typeof r&&(r=parseInt(r)),"string"==typeof e&&(e=parseInt(e)),"string"==typeof a&&(a=parseInt(a));for(var i=0;i<s.length;i++){for(var d=s[i],l=n[d],c="",p="",h=0;h<l.count;h++)c+=d;p="d"==d?u(r,l.count):"m"==d?f(e,l.count):y(a,l.count),o=o.replace(c,p)}return o},v=function(){n.val(h(a.inputFormat,l,i.val(),o.val(),s.val()))};this.updateInput=function(){v()};s.data("days",0);var m=function(t){if(s.data("days")!=r[t-1]){var n=parseInt(s.val()||"1");if(s.html(""),0!=t){a.addNullOption&&s.append("<option value=''>"+a.nullOptionText+"</option>");for(var e=1;e<=r[t-1];e++)$("<option>").attr("value",e).text(u(e)).appendTo(s);s.val(n)}}};s.change(function(){v()}),m(1),o.change(function(){m(parseInt($(this).val())),v()}),a.addNullOption&&o.append("<option value='0'>"+a.nullOptionText+"</option>");for(var p=1;12>=p;p++)o.append("<option value='"+p+"'>"+f(p)+"</option>");if("string"==typeof a.years[0]){var g,I=(new Date).getFullYear();3==a.years.length?(I+=a.years[1],g=a.years[2]):g=a.years[1];for(var p=I;p!=I+g;p+=t(g))i.append("<option value='"+p+"'>"+y(p)+"</option>")}else for(var p=a.years[0];p!=a.years[1];p+=t(a.years[1]-a.years[0]))i.append("<option value='"+p+"'>"+y(p)+"</option>");i.change(function(){v()}),this.inputs={d:s,y:i,m:o},n.data("initial-day")&&$(function(){$.fn.cdp.statics.fns.set(n,[n.data("initial-year"),n.data("initial-month"),n.data("initial-day")])}),v(),n.data("cross-datepicker",this)};$.fn.cdp=function(t,a){var e=$(this);if(0==e.length)return this;if(e.length>1)return e.each(function(){$(this).cdp(t)}),this;if(!e.is("input"))throw"You can apply Cross-DatePicker only on an 'input' element";if("string"==typeof t){var r=$.fn.cdp.statics;return r.fns[t]||console.error("Unknown function "+t),r.fns[t](e,a),this}new n(e,t);return this},$.fn.cdp.defaults={hideInput:!0,format:"d/mmm/yyyy",inputFormat:"yyyy-mm-dd",years:["now",-100],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],addNullOption:!1,nullOptionText:"Select",classes:{container:"cdp-container",controls:"cdp-select",days:"cdp-d",months:"cdp-m",years:"cdp-y"}},$.fn.cdp.statics={fns:{set:function(t,n){var a,e,r,s=($.fn.cdp.statics,t.data("cross-datepicker"));if($.isArray(n))a=n[0],e=n[1],r=n[2];else if("string"==typeof n){var o=n.split("-");a=parseInt(o[0]),e=parseInt(o[1]),r=parseInt(o[2])}else a=n.year||n.y,e=n.month||n.m,r=n.day||n.d;s.inputs.y.val(String(a)),s.inputs.m.val(String(e)),s.inputs.d.val(String(r)),s.updateInput()}}}}();